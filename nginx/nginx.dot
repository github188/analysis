digraph nginx {
    node [
        shape = "record",
    ];
    rank = same;
    rankdir = LR;

    subgraph cluster_ngx_time_t {
        label = "ngx_time_t";

        node_ngx_time_t [label = "<sec>time_t : sec | \
                                  <mse>ngx_uint_t : msec | \
                                  <gmtoff>ngx_int_t : gmtoff"];
    };

    subgraph cluster_ngx_str_t {
        label = "ngx_str_t";

        node_ngx_str_t [label = "<len>size_t : len | \
                                 <data> u_char : *data"];
    };

    subgraph cluster_ngx_cycle_t {
        label = "ngx_cycle_t";

        node_ngx_cycle_t [label = "<conf_ctx>void : ****conf_ctx | \
                                   <pool>ngx_pool_t : *pool | \
                                   <log>ngx_log_t : *log | \
                                   <new_log>ngx_log_t : new_log"];
    };

    subgraph cluster_ngx_pool_t {
        label = "ngx_pool_t";
        style = "filled";

        node_ngx_pool_t [label = "<d>ngx_pool_data : d | \
                                  <max>size_t : max | \
                                  <current>ngx_pool_t : *current | \
                                  <chain>ngx_chain_t : *chain | \
                                  <large>ngx_pool_large_t : *large | \
                                  <cleanup>ngx_pool_cleanup_t : *cleanup | \
                                  <log>ngx_log_t : *log"];
    };

    subgraph cluster_ngx_pool_data_t {
        label = "ngx_pool_data_t"
        node_ngx_pool_data_t [label = "<last>u_char : *last | \
                                       <end>u_char : *end | \
                                       <next>ngx_pool_t : *next | \
                                       <failed>ngx_uint_t : failed"];
    };
    
    subgraph cluster_ngx_err_list {
        label = "ngx_err_list";
        rank = same;
        node_ngx_sys_errlist [label = "ngx_str_t : *ngx_sys_errlist"];
        node_ngx_str_ts [label = "<1>ngx_str_t | \
                                  <2>ngx_str_t | \
                                  <3>ngx_str_t | \
                                  <4>......"];
        node_ngx_sys_errlist -> node_ngx_str_ts:1;
        node_ngx_str_ts:1 -> node_ngx_str_t:len;
        node_ngx_str_ts:1 -> node_ngx_str_t:data;
    };

    subgraph cluster_ngx_time {
        label = "ngx_time";
        rank = same;
        node_ngx_cached_err_log_time [
            label = "ngx_str_t : ngx_cached_err_log_time",
        ];
        node_ngx_cached_http_time [
            label = "ngx_str_t : ngx_cached_http_time",
        ];
        node_ngx_cached_http_log_time [
            label = "ngx_str_t : ngx_cached_http_log_time",
        ];
        node_ngx_cached_http_log_iso8601_time [
            label = "ngx_str_t : ngx_cached_http_log_iso8601_time",
        ];
        node_cached_time [
            label = "<1>ngx_time_t | \
                     <2>ngx_time_t | \
                     <3>ngx_time_t | \
                     <4>......",
        ];
        node_ngx_cached_time [
            label = "ngx_time_t : *ngx_cached_time",
        ];

        node_ngx_cached_time -> node_cached_time:1;
    };

    node_ngx_cycle_t:pool -> node_ngx_pool_t:d;

    node_ngx_pool_t:d -> node_ngx_pool_data_t:last;
    node_ngx_pool_t:d -> node_ngx_pool_data_t:failed;
    node_ngx_pool_t:current -> node_ngx_pool_t:d;
};
